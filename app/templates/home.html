{% include "header.html" %}
{% load static %}
<body>
    <div id="container" style="margin-bottom: 30px;"></div>
    <div id="container2" style="margin-bottom: 30px;"></div>
    <div id="container3" style="text-align:center;">
        <p style="text-align:center;">Live Photo</p>
        <img src="/static/image_last/last.jpg" alt="Live photo" style="height:600px;margin-bottom: 50px;">
    </div>

<script>
function createChart() {
  Highcharts.chart('container', {
    chart: {
      type: 'spline'
    },
    title: {
      text: 'Temperature'
    },
    yAxis: [{
      labels: {
        format: '{value}°C',
        style: {
          color: Highcharts.getOptions().colors[0]
        },
      },
      title: {
        text: 'Temperature',
        style: {
          color: Highcharts.getOptions().colors[0]
        },
      },
      minorGridLineWidth: 0,
      gridLineWidth: 0,
      alternateGridColor: null,
      plotBands: [{
        from: 0,
        to: 20,
        color: 'rgba(68, 170, 213, 0.1)',
        label: {
          text: 'Take un pull',
          style: {
            color: '#606060'
          }
        }
      },{
        from: 20,
        to: 35,
        color: 'rgba(34,139,34, 0.1)',
        label: {
          text: 'Take un tshirt',
          style: {
            color: '#606060'
          }
        }
      },{
        from: 35,
        to: 100,
        color: 'rgba(255,165,0, 0.1)',
        label: {
          text: 'Take rien',
          style: {
            color: '#606060'
          }
        }
      }],
      opposite: false

    }],
    tooltip: {
      formatter: function(d) {
        return '<span style="color:' + Highcharts.getOptions().colors[0] + '">\u25CF</span> Date: <b> ' + Highcharts.dateFormat('%e %b %Y, %H:%M', new Date(this.x)) + '</b><br/><span style="color:' + Highcharts.getOptions().colors[0] + '">\u25CF</span> Temperature: <b> ' + this.y + '°C</b><br/>';
      }
    },
    legend: {
      enabled: false,
    },
    series: [{
      name: 'Temperature',
      color: Highcharts.getOptions().colors[0],

    }],
    data: {
      csvURL: "https://raspator.ddns.net/static/data/weather_temp.csv",
      enablePolling: true,
      dataRefreshRate: 60*12
    }
  });

}

function createChart2() {
  Highcharts.chart('container2', {
    chart: {
      type: 'spline'
    },
    title: {
      text: 'Humidity'
    },
    yAxis: [{
      labels: {
        format: '{value}%',
        style: {
          color: Highcharts.getOptions().colors[1]
        },
      },
      title: {
        text: 'Humidity',
        style: {
          color: Highcharts.getOptions().colors[1]
        },
      },
      opposite: false

    }],
    tooltip: {
        formatter: function(d){
            return '<span style="color:'+Highcharts.getOptions().colors[1]+'">\u25CF</span> Date: <b> ' + Highcharts.dateFormat('%e %b %Y, %H:%M', new Date(this.x)) + '</b><br/><span style="color:'+Highcharts.getOptions().colors[1]+'">\u25CF</span> Humidity: <b> ' + this.y + '%</b><br/>';
        }
    },
    legend: {
      enabled: false,
    },
    series: [{
      name: 'Humidity',
      color: Highcharts.getOptions().colors[1],

    }],
    data: {
      csvURL: "https://raspator.ddns.net/static/data/weather_humidity.csv",
      enablePolling: true,
      dataRefreshRate: 60*12
    }
  });

}

createChart();
createChart2();
</script>
</body>
{% include "footer.html" %}